<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Play · 首页</title>
<link
  rel="icon"
  href="public/favicon.svg"
  type="image/svg+xml">
<style>
:root{--bg:#0b0f17;--fg:#e6efff;--muted:#9aa7bd;--primary:#64ffda;--card:#101626;--border:rgba(255,255,255,0.08)}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--fg);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;min-height:100vh}
.wrap{max-width:1080px;margin:0 auto;padding:48px 24px}
.header{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px;margin-bottom:32px}
.logo{width:96px;height:96px}
.title{font-size:28px;font-weight:800;letter-spacing:0.5px}
.subtitle{color:var(--muted);text-align:center;margin-top:8px;font-size:14px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:18px;margin-top:28px}
.card{position:relative;border:1px solid var(--border);border-radius:16px;background:var(--card);overflow:hidden;transition:transform .2s ease,box-shadow .2s ease,border-color .2s ease;will-change:transform}
.card:hover{border-color:rgba(255,255,255,.18);box-shadow:0 14px 40px rgba(0,0,0,.35)}
.card::before{content:"";position:absolute;inset:-20px;background:radial-gradient(120px circle at var(--mx,50%) var(--my,50%), rgba(100,255,218,.18), rgba(100,255,218,.08) 35%, transparent 70%);opacity:0;transition:opacity .25s;pointer-events:none;filter:blur(18px)}
.card:hover::before{opacity:1}
.card-inner{position:relative;padding:20px;transition:transform .35s cubic-bezier(.2,.6,.2,1)}
.card-title{font-size:18px;font-weight:700;margin-bottom:8px;color:var(--fg)}
.card-desc{font-size:14px;line-height:1.7;color:var(--muted)}
.card-link{position:absolute;inset:0}
.footer{display:flex;justify-content:center;align-items:center;gap:12px;margin-top:40px;color:var(--muted);font-size:12px}
.badge{display:inline-flex;align-items:center;gap:8px;padding:10px 16px;border:1px solid var(--border);border-radius:999px;background:rgba(255,255,255,.03)}
.source-link{display:inline-flex;align-items:center;gap:8px;color:var(--primary);text-decoration:none}
.source-link:hover{filter:brightness(1.1)}
.badge-dot{width:8px;height:8px;border-radius:50%;background:var(--primary);box-shadow:0 0 12px var(--primary)}
</style>
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<body>
<div class="wrap">
  <div class="header">
    <img class="logo" src="public/favicon.svg" alt="logo">
    <div class="title">Play · 实验室</div>
  </div>
  <div class="subtitle">Gemini 示例生成，点击卡片进入对应示例</div>

  <div class="grid" id="grid"></div>

  <div class="footer">
    <div class="badge">
      <span class="badge-dot"></span>
      <span>© <span id="year"></span> SanXiaoXing</span>
    </div>
    <a class="source-link" href="https://github.com/SanXiaoXing/PlayGemini/tree/main" target="_blank" rel="noopener noreferrer">
      <span class="badge-dot"></span>
      <span>查看源码</span>
    </a>
  </div>
    
    <script>
      const y=new Date().getFullYear();
      document.getElementById('year').textContent=y===2025?'2025':'2025-'+y;
    </script>
  </div>
</div>

<script>
const grid=document.getElementById('grid');
let entered=false;
const fallback=[
  {title:'磁性光标演示',desc:'双模式、状态感知的磁性光标',href:'src/cursor/cursor_demo.html'},
  {title:'时间线组件',desc:'响应式时间线展示与导航',href:'src/Timeline/index.html'},
  {title:'粒子特效集合',desc:'多种粒子特效演示页面',href:'src/Particle_Effects/index.html'}
];

async function load(){
  try{
    const res=await fetch('public/cards.json',{cache:'no-store'});
    if(!res.ok) throw new Error('fail');
    const data=await res.json();
    render(Array.isArray(data)?data:fallback);
  }catch(e){
    render(fallback);
  }
}

function render(items){
  grid.innerHTML='';
  items.forEach((it)=>{
    const card=document.createElement('div');
    card.className='card';
    card.setAttribute('data-force','0.13');
    const inner=document.createElement('div');
    inner.className='card-inner';
    const h=document.createElement('div');
    h.className='card-title';
    h.textContent=it.title;
    const p=document.createElement('div');
    p.className='card-desc';
    p.textContent=it.desc||'';
    const a=document.createElement('a');
    a.className='card-link';
    a.href=it.href;
    a.rel='noopener noreferrer';
    card.appendChild(inner);
    inner.appendChild(h);
    inner.appendChild(p);
    card.appendChild(a);
    attachMagnet(card,inner);
    grid.appendChild(card);
  });
  bindExit();
  if(!entered){
    animateIn();
    entered=true;
  }else{
    gsap.from('.card',{opacity:0,y:12,duration:0.4,stagger:0.06,ease:'power2.out'});
  }
}

function attachMagnet(card,inner){
  const force=parseFloat(card.getAttribute('data-force'))||0.13;
  let rect=null; let raf=null;
  function onEnter(){rect=card.getBoundingClientRect();}
  function onMove(e){
    if(!rect) rect=card.getBoundingClientRect();
    const cx=rect.left+rect.width/2;
    const cy=rect.top+rect.height/2;
    const dx=e.clientX-cx;
    const dy=e.clientY-cy;
    const tx=dx*force; const ty=dy*force;
    if(raf) cancelAnimationFrame(raf);
    raf=requestAnimationFrame(()=>{
      card.style.transform=`translate(${tx}px,${ty}px)`;
      card.style.setProperty('--mx', `${e.clientX - rect.left}px`);
      card.style.setProperty('--my', `${e.clientY - rect.top}px`);
    });
  }
  function onLeave(){
    card.style.transition='transform .45s cubic-bezier(.2,.8,.2,1)';
    card.style.transform='translate(0,0)';
    setTimeout(()=>{card.style.transition='transform .2s ease';},460);
  }
  card.addEventListener('mouseenter',onEnter);
  card.addEventListener('mousemove',onMove);
  card.addEventListener('mouseleave',onLeave);
}

function animateIn(){
  gsap.set('.wrap',{opacity:0,y:20});
  gsap.to('.wrap',{opacity:1,y:0,duration:0.6,ease:'power2.out'});
  gsap.from('.logo',{scale:0.85,opacity:0,duration:0.5,ease:'back.out(1.6)'});
  gsap.from('.title',{opacity:0,y:8,duration:0.4,delay:0.1,ease:'power2.out'});
  gsap.from('.subtitle',{opacity:0,y:6,duration:0.4,delay:0.2,ease:'power2.out'});
  gsap.from('.card',{opacity:0,y:12,duration:0.45,stagger:0.06,delay:0.25,ease:'power2.out'});
  gsap.from('.footer',{opacity:0,duration:0.4,delay:0.6,ease:'power2.out'});
}

function bindExit(){
  document.querySelectorAll('.card-link').forEach(a=>{
    a.addEventListener('click',(e)=>{
      e.preventDefault();
      const url=a.href;
      gsap.to('.wrap',{opacity:0,y:10,duration:0.35,ease:'power1.in',onComplete:()=>{window.location.href=url;}});
    });
  });
}

load();
</script>
</body>
</html>
